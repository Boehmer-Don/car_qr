!function(){var e=document.querySelectorAll(".cart-item"),t=document.querySelectorAll(".plus-gift-box-item"),r=document.querySelectorAll(".minus-gift-box-item"),i=document.querySelector("#gift-boxes-form"),n=document.querySelector("#gift-boxes-submit-form"),o=document.querySelector("#available-amount");function a(t){var r=t.target.previousElementSibling,i=parseFloat(r.getAttribute("max-qty")||"0"),n=parseFloat(r.getAttribute("price")||"0"),a=parseFloat(r.value)+1,l=parseFloat(o.innerText)-1*n;a>i||l<0||(r.value=a.toString(),o.innerText=l.toFixed(1).toString(),e.forEach((function(e){var t=e.querySelector("input"),r=parseFloat(t.getAttribute("price")||"0"),i=parseFloat(o.innerText)-1*r;Number(t.value)>0||i<0&&e.classList.add("hidden")})))}function l(t){var r=t.target.nextElementSibling,i=parseFloat(r.getAttribute("price")||"0"),n=parseFloat(r.value)-1;n<0||(r.value=n.toString(),o.innerHTML=(parseFloat(o.innerText)+1*i).toFixed(1).toString(),e.forEach((function(e){var t=e.querySelector("input"),r=1*parseFloat(t.getAttribute("price")||"0");Number(t.value)<0||e.classList.contains("hidden")&&r<parseFloat(o.innerText)&&e.classList.remove("hidden")})))}n.addEventListener("click",(function(){if(i.reportValidity()){var e=document.querySelector("#gift-boxes-form-one"),t=document.querySelector("#gift-boxes-form-two"),r=document.querySelector("#add-cart-content");if(n.innerHTML.includes("Next")){var o=i.querySelector('input[name="gift_boxes"]'),a=document.querySelectorAll('input[name="gift_box"]'),l=Array.from(a).map((function(e){var t=e.getAttribute("box-item-id")||"",r=parseFloat(e.value||"0");return{dealerGiftItemId:t,totalPrice:parseFloat(e.getAttribute("price"))*r,qty:r}})).filter((function(e){return e.qty>0}));return 0===l.length?void alert("Please select at least one gift box"):(o.value=JSON.stringify(l),i.classList.replace("w-1/2","w-full"),r.classList.add("hidden"),e.classList.add("hidden"),t.classList.remove("hidden"),t.querySelectorAll("input:disabled").forEach((function(e){e.removeAttribute("disabled")})),void(n.innerHTML="Submit"))}return n.innerHTML.includes("Submit")?(console.log("submit"),i.submit(),void(n.disabled=!0)):void 0}})),t.forEach((function(e){e.addEventListener("click",a)})),r.forEach((function(e){e.addEventListener("click",l)}))}();