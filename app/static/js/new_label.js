(()=>{var e=document.querySelectorAll(".suggestion-container");document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.forEach((function(e){e.classList.add("hidden")}))}));var t=document.querySelector(".make-container"),n=document.querySelector(".model-container"),s=document.querySelector(".trim-container"),i=document.querySelector(".type-container");document.addEventListener("click",(function(e){t.classList.contains("hidden")||e.target===o||t.classList.add("hidden"),n.classList.contains("hidden")||e.target===r||n.classList.add("hidden"),s.classList.contains("hidden")||e.target===a||s.classList.add("hidden"),i.classList.contains("hidden")||e.target===l||i.classList.add("hidden")}));var d,c,o=document.querySelector("#make-1"),r=document.querySelector("#vehicle_model-1"),a=document.querySelector("#label-1-trim"),l=document.querySelector("#label-1-type"),u=document.querySelector(".make-warning"),m=document.querySelector(".model-warning"),L=document.querySelector(".make-suggestion"),h=document.querySelector(".model-suggestion"),f=document.querySelector(".trim-suggestion");function v(){document.querySelectorAll(".make-suggestion").forEach((function(e){e.addEventListener("click",(function(e){o.value=e.target.innerHTML.trim(),t.classList.add("hidden");var s=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeSelected:o.value})}).then((function(e){return e.json()})).then((function(e){s.push.apply(s,e.models),n.innerHTML="",s.forEach((function(e){var t=h.cloneNode(!0);t.innerHTML=e,n.appendChild(t)}))})).catch((function(e){console.error("Error fetching models by make:",e)})),m.classList.add("hidden"),r.value="",r.addEventListener("click",(function(e){n.classList.remove("hidden"),g()}))}))}))}function g(){document.querySelectorAll(".model-suggestion").forEach((function(e){e.addEventListener("click",(function(e){r.value=e.target.innerHTML.trim(),n.classList.add("hidden");var t=[];fetch("/labels/get_trims",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelSelected:r.value})}).then((function(e){return e.json()})).then((function(e){t.push.apply(t,e.trims),s.innerHTML="",t.forEach((function(e){var t=f.cloneNode(!0);t.innerHTML=e,s.appendChild(t)})),o.value=e.make,u.classList.add("hidden"),l.value=e.type,p()})).catch((function(e){console.error("Error fetching trims by model:",e)})),r.addEventListener("click",(function(e){n.classList.remove("hidden")}))}))}))}function p(){var e=document.querySelectorAll(".trim-suggestion"),t=[];e.forEach((function(e){t.push(e.innerHTML.trim()),e.addEventListener("click",(function(e){a.value=e.target.innerHTML.trim(),s.classList.add("hidden")}))})),a.addEventListener("input",(function(e){var n="text-indigo-500";t.includes(a.value)||a.classList.contains(n)?t.includes(a.value)&&a.classList.contains(n)&&a.classList.remove(n):a.classList.add(n)}))}document.querySelector(".type-suggestion"),o&&o.addEventListener("input",(function(e){var n=[];fetch("/labels/get_makes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeTyped:e.target.value})}).then((function(e){return e.json()})).then((function(e){0===e.makes.length?(o.classList.add("text-indigo-500"),u.classList.remove("hidden")):(o.classList.remove("text-indigo-500"),u.classList.add("hidden"),n.push.apply(n,e.makes),t.innerHTML="",n.forEach((function(e){var n=L.cloneNode(!0);n.innerHTML=e,t.appendChild(n)})),v())})).catch((function(e){console.error("Error sending makes data to Flask:",e)}))})),o.addEventListener("click",(function(e){t.classList.toggle("hidden")})),r.addEventListener("click",(function(e){n.classList.toggle("hidden")})),a.addEventListener("click",(function(e){s.classList.toggle("hidden")})),l.addEventListener("click",(function(e){i.classList.toggle("hidden")})),r&&r.addEventListener("input",(function(e){var t=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelTyped:r.value})}).then((function(e){return e.json()})).then((function(e){0===e.models.length?(r.classList.add("text-indigo-500"),m.classList.remove("hidden")):(r.classList.remove("text-indigo-500"),m.classList.add("hidden"),t.push.apply(t,e.models),n.innerHTML="",t.forEach((function(e){var t=h.cloneNode(!0);t.innerHTML=e,n.appendChild(t)})),g())})).catch((function(e){console.error("Error fetching all models:",e)}))})),v(),g(),p(),d=document.querySelectorAll(".type-suggestion"),c=[],d.forEach((function(e){c.push(e.innerHTML.trim()),e.addEventListener("click",(function(e){l.value=e.target.innerHTML.trim(),i.classList.add("hidden")}))})),l.addEventListener("input",(function(e){var t="text-indigo-500";c.includes(l.value)||l.classList.contains(t)?c.includes(l.value)&&l.classList.contains(t)&&l.classList.remove(t):l.classList.add(t)}));var y=document.querySelector("#label-form"),S=document.querySelector("#label-1-sticker-number"),E=document.querySelector(".sticker-code-exists-error"),b=document.querySelector(".sticker-code-not-pending-error"),k=!1,T=!1;S&&S.addEventListener("input",(function(e){fetch("/labels/check_label_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({codeTyped:S.value})}).then((function(e){return e.json()})).then((function(e){!1===e.pending?(b.classList.remove("hidden"),S.classList.add("text-red-700"),S.classList.add("border-2"),S.classList.add("bg-red-100"),S.classList.add("focus:border-red-700"),k=!0):(b.classList.add("hidden"),S.classList.remove("text-red-700"),S.classList.remove("border-2"),S.classList.remove("bg-red-100"),S.classList.remove("focus:border-red-700"),k=!1),!0===e.exists?(b.classList.add("hidden"),E.classList.remove("hidden"),S.classList.add("text-red-700"),S.classList.add("border-2"),S.classList.add("bg-red-100"),S.classList.add("focus:border-red-700"),T=!0):(E.classList.add("hidden"),S.classList.remove("text-red-700"),S.classList.remove("border-2"),S.classList.remove("bg-red-100"),S.classList.remove("focus:border-red-700"),T=!1),y.addEventListener("submit",(function(e){T&&e.preventDefault(),k&&e.preventDefault()}))})).catch((function(e){console.error("Error fetching sticker number:",e)}))}))})();