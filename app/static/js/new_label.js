(()=>{console.log("new_label.ts");var e=document.querySelectorAll(".suggestion-container");document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.forEach((function(e){e.classList.add("hidden")}))}));var t=document.querySelector(".make-container"),n=document.querySelector(".model-container"),o=document.querySelector(".trim-container"),s=document.querySelector(".type-container"),r=document.querySelector("#make-1"),d=document.querySelector("#vehicle_model-1"),c=document.querySelector("#label-1-trim"),i=document.querySelector("#label-1-type"),a=document.querySelector(".make-warning"),l=document.querySelector(".model-warning"),u=document.querySelector(".make-suggestion"),m=document.querySelector(".model-suggestion"),h=document.querySelector(".trim-suggestion");function f(){document.querySelectorAll(".make-suggestion").forEach((function(e){e.addEventListener("click",(function(e){r.value=e.target.innerHTML.trim(),t.classList.add("hidden");var o=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeSelected:r.value})}).then((function(e){return e.json()})).then((function(e){o.push.apply(o,e.models),n.innerHTML="",o.forEach((function(e){var t=m.cloneNode(!0);t.innerHTML=e,n.appendChild(t)}))})).catch((function(e){console.error("Error fetching models by make:",e)})),l.classList.add("hidden"),d.value="",d.addEventListener("click",(function(e){n.classList.remove("hidden"),L()}))}))}))}function L(){document.querySelectorAll(".model-suggestion").forEach((function(e){e.addEventListener("click",(function(e){d.value=e.target.innerHTML.trim(),n.classList.add("hidden");var t=[];fetch("/labels/get_trims",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelSelected:d.value})}).then((function(e){return e.json()})).then((function(e){t.push.apply(t,e.trims),o.innerHTML="",t.forEach((function(e){var t=h.cloneNode(!0);t.innerHTML=e,o.appendChild(t)})),r.value=e.make,a.classList.add("hidden"),i.value=e.type,g()})).catch((function(e){console.error("Error fetching trims by model:",e)})),d.addEventListener("click",(function(e){n.classList.remove("hidden")}))}))}))}function g(){document.querySelectorAll(".trim-suggestion").forEach((function(e){e.addEventListener("click",(function(e){c.value=e.target.innerHTML.trim(),o.classList.add("hidden")}))}))}document.querySelector(".type-suggestion"),r&&r.addEventListener("input",(function(e){var n=[];fetch("/labels/get_makes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeTyped:e.target.value})}).then((function(e){return e.json()})).then((function(e){0===e.makes.length?(console.log("data.makes.length === 0",e.makes),r.classList.add("text-indigo-500"),a.classList.remove("hidden")):(console.log("data.makes.length != 0",e.makes),r.classList.remove("text-indigo-500"),a.classList.add("hidden"),n.push.apply(n,e.makes),t.innerHTML="",n.forEach((function(e){var n=u.cloneNode(!0);n.innerHTML=e,t.appendChild(n)})),f())})).catch((function(e){console.error("Error sending makes data to Flask:",e)}))})),r.addEventListener("click",(function(e){t.classList.toggle("hidden")})),d.addEventListener("click",(function(e){n.classList.toggle("hidden")})),c.addEventListener("click",(function(e){o.classList.toggle("hidden")})),i.addEventListener("click",(function(e){s.classList.toggle("hidden")})),d&&d.addEventListener("input",(function(e){var t=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelTyped:d.value})}).then((function(e){return e.json()})).then((function(e){0===e.models.length?(d.classList.add("text-indigo-500"),l.classList.remove("hidden")):(d.classList.remove("text-indigo-500"),l.classList.add("hidden"),t.push.apply(t,e.models),n.innerHTML="",t.forEach((function(e){var t=m.cloneNode(!0);t.innerHTML=e,n.appendChild(t)})),L())})).catch((function(e){console.error("Error fetching all models:",e)}))})),f(),L(),g(),document.querySelectorAll(".type-suggestion").forEach((function(e){e.addEventListener("click",(function(e){i.value=e.target.innerHTML.trim(),s.classList.add("hidden")}))}));var v=document.querySelector("#label-form"),y=document.querySelector("#label-1-sticker-number"),p=document.querySelector(".sticker-code-exists-error"),k=document.querySelector(".sticker-code-not-pending-error"),S=!1,b=!1;console.log("codeExistsError",p),y&&y.addEventListener("input",(function(e){fetch("/labels/check_label_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({codeTyped:y.value})}).then((function(e){return e.json()})).then((function(e){!1===e.pending?(k.classList.remove("hidden"),y.classList.add("text-red-700"),y.classList.add("border-2"),y.classList.add("bg-red-100"),y.classList.add("focus:border-red-700"),S=!0):(k.classList.add("hidden"),y.classList.remove("text-red-700"),y.classList.remove("border-2"),y.classList.remove("bg-red-100"),y.classList.remove("focus:border-red-700"),S=!1),!0===e.exists?(k.classList.add("hidden"),p.classList.remove("hidden"),y.classList.add("text-red-700"),y.classList.add("border-2"),y.classList.add("bg-red-100"),y.classList.add("focus:border-red-700"),b=!0):(p.classList.add("hidden"),y.classList.remove("text-red-700"),y.classList.remove("border-2"),y.classList.remove("bg-red-100"),y.classList.remove("focus:border-red-700"),b=!1),v.addEventListener("submit",(function(e){b&&e.preventDefault(),S&&e.preventDefault()}))})).catch((function(e){console.error("Error fetching sticker number:",e)}))}))})();