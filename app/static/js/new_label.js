(()=>{var e=document.querySelectorAll(".suggestion-container");document.addEventListener("keydown",(function(t){"Escape"===t.key&&e.forEach((function(e){e.classList.add("hidden")}))}));var t=document.querySelector(".make-container"),n=document.querySelector(".model-container"),s=document.querySelector(".trim-container"),d=document.querySelector(".type-container");document.addEventListener("click",(function(e){t.classList.contains("hidden")||e.target===i||t.classList.add("hidden"),n.classList.contains("hidden")||e.target===o||n.classList.add("hidden"),s.classList.contains("hidden")||e.target===c||s.classList.add("hidden"),d.classList.contains("hidden")||e.target===r||d.classList.add("hidden")}));var i=document.querySelector("#make-1"),o=document.querySelector("#vehicle_model-1"),c=document.querySelector("#label-1-trim"),r=document.querySelector("#label-1-type"),a=document.querySelector(".make-warning"),l=document.querySelector(".model-warning"),u=document.querySelector(".make-suggestion"),m=document.querySelector(".model-suggestion"),h=document.querySelector(".trim-suggestion");function L(){document.querySelectorAll(".make-suggestion").forEach((function(e){e.addEventListener("click",(function(e){i.value=e.target.innerHTML.trim(),t.classList.add("hidden");var s=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeSelected:i.value})}).then((function(e){return e.json()})).then((function(e){s.push.apply(s,e.models),n.innerHTML="",s.forEach((function(e){var t=m.cloneNode(!0);t.innerHTML=e,n.appendChild(t)}))})).catch((function(e){console.error("Error fetching models by make:",e)})),l.classList.add("hidden"),o.value="",o.addEventListener("click",(function(e){n.classList.remove("hidden"),f()}))}))}))}function f(){document.querySelectorAll(".model-suggestion").forEach((function(e){e.addEventListener("click",(function(e){o.value=e.target.innerHTML.trim(),n.classList.add("hidden");var t=[];fetch("/labels/get_trims",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelSelected:o.value})}).then((function(e){return e.json()})).then((function(e){t.push.apply(t,e.trims),s.innerHTML="",t.forEach((function(e){var t=h.cloneNode(!0);t.innerHTML=e,s.appendChild(t)})),i.value=e.make,a.classList.add("hidden"),r.value=e.type,g()})).catch((function(e){console.error("Error fetching trims by model:",e)})),o.addEventListener("click",(function(e){n.classList.remove("hidden")}))}))}))}function g(){document.querySelectorAll(".trim-suggestion").forEach((function(e){e.addEventListener("click",(function(e){c.value=e.target.innerHTML.trim(),s.classList.add("hidden")}))}))}document.querySelector(".type-suggestion"),i&&i.addEventListener("input",(function(e){var n=[];fetch("/labels/get_makes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({makeTyped:e.target.value})}).then((function(e){return e.json()})).then((function(e){0===e.makes.length?(i.classList.add("text-indigo-500"),a.classList.remove("hidden")):(i.classList.remove("text-indigo-500"),a.classList.add("hidden"),n.push.apply(n,e.makes),t.innerHTML="",n.forEach((function(e){var n=u.cloneNode(!0);n.innerHTML=e,t.appendChild(n)})),L())})).catch((function(e){console.error("Error sending makes data to Flask:",e)}))})),i.addEventListener("click",(function(e){t.classList.toggle("hidden")})),o.addEventListener("click",(function(e){n.classList.toggle("hidden")})),c.addEventListener("click",(function(e){s.classList.toggle("hidden")})),r.addEventListener("click",(function(e){d.classList.toggle("hidden")})),o&&o.addEventListener("input",(function(e){var t=[];fetch("/labels/get_models",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelTyped:o.value})}).then((function(e){return e.json()})).then((function(e){0===e.models.length?(o.classList.add("text-indigo-500"),l.classList.remove("hidden")):(o.classList.remove("text-indigo-500"),l.classList.add("hidden"),t.push.apply(t,e.models),n.innerHTML="",t.forEach((function(e){var t=m.cloneNode(!0);t.innerHTML=e,n.appendChild(t)})),f())})).catch((function(e){console.error("Error fetching all models:",e)}))})),L(),f(),g(),document.querySelectorAll(".type-suggestion").forEach((function(e){e.addEventListener("click",(function(e){r.value=e.target.innerHTML.trim(),d.classList.add("hidden")}))}));var v=document.querySelector("#label-form"),y=document.querySelector("#label-1-sticker-number"),p=document.querySelector(".sticker-code-exists-error"),S=document.querySelector(".sticker-code-not-pending-error"),b=!1,k=!1;y&&y.addEventListener("input",(function(e){fetch("/labels/check_label_code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({codeTyped:y.value})}).then((function(e){return e.json()})).then((function(e){!1===e.pending?(S.classList.remove("hidden"),y.classList.add("text-red-700"),y.classList.add("border-2"),y.classList.add("bg-red-100"),y.classList.add("focus:border-red-700"),b=!0):(S.classList.add("hidden"),y.classList.remove("text-red-700"),y.classList.remove("border-2"),y.classList.remove("bg-red-100"),y.classList.remove("focus:border-red-700"),b=!1),!0===e.exists?(S.classList.add("hidden"),p.classList.remove("hidden"),y.classList.add("text-red-700"),y.classList.add("border-2"),y.classList.add("bg-red-100"),y.classList.add("focus:border-red-700"),k=!0):(p.classList.add("hidden"),y.classList.remove("text-red-700"),y.classList.remove("border-2"),y.classList.remove("bg-red-100"),y.classList.remove("focus:border-red-700"),k=!1),v.addEventListener("submit",(function(e){k&&e.preventDefault(),b&&e.preventDefault()}))})).catch((function(e){console.error("Error fetching sticker number:",e)}))}))})();